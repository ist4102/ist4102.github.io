######################
# - Conky settings - #
######################
override_utf8_locale yes
update_interval 1
total_run_times 0
net_avg_samples 1
cpu_avg_samples 1
if_up_strictness link

imlib_cache_size 0
double_buffer yes
no_buffers yes

format_human_readable

short_units yes

#####################
# - Text settings - #
#####################
use_xft yes
xftfont WenQuanYi Micro Hei:size=9
override_utf8_locale yes
text_buffer_size 2048

#############################
# - Window specifications - #
#############################
own_window_class Conky
own_window yes
own_window_type dock
own_window_transparent yes
own_window_argb_visual yes
own_window_argb_value 200
own_window_hints undecorated,below,sticky,skip_taskbar,skip_pager

alignment top_right
gap_x 20
gap_y 20
minimum_size 350 1250
maximum_width 350

default_bar_size 60 8

#########################
# - Graphics settings - #
#########################
draw_shades no

default_color cccccc

color0 cyan
color1 green
color2 orange
color3 204A87
color4 red

TEXT
###############
# - 文本 - #
###############
${voffset 25}${voffset}${color}${font wingding:style=Bold:size=16}IST智能实验室服务主机(ist-Server)${font}${color}
${voffset}${color}${font wingding:style=Bold:size=7}People who're serious about software shoud make their own hardware${font}${color}
#############
# - CLOCK - #
#############
${voffset 3}${color2}${font Liberation Sans:style=Bold:size=65}${time %H:%M:%S}${font}${color}
${voffset 5}${color1}${font WenQuanYi Micro Hei:size 25}${time %Y-%m-%d}${alignr}${time %A}${font}${color}
##############
# -  INFO  - #
##############
${voffset 10}${color2}${font Liberation Sans:style=Bold:size=14}INFO${font}${color}
${voffset -5}${goto 10}Hostname: ${alignr}${color2}${nodename}${color}
${voffset -5}${goto 10}Local IP: ${alignr}${color2}${addr enp3s0}${color}
${voffset -5}${goto 10}Kernel: ${alignr}${color2}${kernel}${color}
${voffset -5}${goto 10}System:${alignr}${color2}${execi 6000 lsb_release -d| awk '{$1=""; print $0}'}_${machine}${color}
${voffset -5}${goto 10}Uptime: ${alignr}${color2}${uptime}${color}
${voffset}${goto 10}Load Average: ${alignr}${color2}${loadavg}${color}
${voffset -5}${goto 10}Running Processes: ${font Liberation Sans:style=Bold:size=10}${alignr}${color2}${running_processes}/${processes}${color}${font}
${voffset -5}${goto 10}Running      Threads: ${font Liberation Sans:style=Bold:size=10}${alignr}${color2}${running_threads}/${threads}${color}${font}
##############
# - GPU - #
##############
${voffset 10}${color2}${font Liberation Sans:style=Bold:size=14}GPU${font}${color}${voffset -2}${font Liberation Sans:size=10}${color1}${goto 60}${nvidia gpufreqcur}${goto 100}${nvidia memfreq}Mhz${alignr}${nvidia temp}°C${color}${color}${font}
##############
# -  CPU   - #
##############
${voffset 10}${color2}${font Liberation Sans:style=Bold:size=14}CPU${font}${color}${font Liberation Sans:size=10}${color1}${goto 60}${cpu cpu}%${goto 95}${freq_g}Ghz${alignr}${exec sensors | grep 'Package id 0' | cut -c17-23}${color}${font}
# |--PROC
${goto 16}ID${goto 60}NAME${alignr}CPU%
${voffset -1}${color1}${top pid 1}${color}${goto 60}${color2}${top name 1}${color}${font Liberation Sans:style=Bold:size=8}${color1}${alignr}${top cpu 1}${color}${font}
${voffset -8}${color1}${top pid 2}${color}${goto 60}${color2}${top name 2}${color}${font Liberation Sans:style=Bold:size=8}${color1}${alignr}${top cpu 2}${color}${font}
${voffset -8}${color1}${top pid 3}${color}${goto 60}${color2}${top name 3}${color}${font Liberation Sans:style=Bold:size=8}${color1}${alignr}${top cpu 3}${color}${font}
${voffset -8}${color1}${top pid 4}${color}${goto 60}${color2}${top name 3}${color}${font Liberation Sans:style=Bold:size=8}${color1}${alignr}${top cpu 4}${color}${font}
${voffset -8}${color1}${top pid 5}${color}${goto 60}${color2}${top name 3}${color}${font Liberation Sans:style=Bold:size=8}${color1}${alignr}${top cpu 5}${color}${font}
##############
# - Memory - #
##############
${voffset 10}${color2}${font Liberation Sans:style=Bold:size=14}Memory${font}${alignr}${membar 8,73}${color}
${goto 13}Free: ${font Liberation Sans:style=Bold:size=8}${color2}${memeasyfree}${color}${font}
${voffset -15}${goto 120}${font Liberation Sans:style=Bold:size=8}Used: ${color1}${mem}${color}${font}
${voffset -12}${goto 10}Total: ${font Liberation Sans:style=Bold:size=8}${color2}${memmax}${color}${font}
# |--PROC
${goto 16}ID${goto 60}NAME${alignr}RAM%
${voffset -1}${color1}${top_mem pid 1}${color}${goto 60}${color2}${top_mem name 1}${color}${font Liberation Sans:style=Bold:size=8}${color1}${alignr}${top_mem mem 1}${color}${font}
${voffset -8}${color1}${top_mem pid 2}${color}${goto 60}${color2}${top_mem name 2}${color}${font Liberation Sans:style=Bold:size=8}${color1}${alignr}${top_mem mem 2}${color}${font}
${voffset -8}${color1}${top_mem pid 3}${color}${goto 60}${color2}${top_mem name 3}${color}${font Liberation Sans:style=Bold:size=8}${color1}${alignr}${top_mem mem 3}${color}${font}
${voffset -8}${color1}${top_mem pid 4}${color}${goto 60}${color2}${top_mem name 3}${color}${font Liberation Sans:style=Bold:size=8}${color1}${alignr}${top_mem mem 4}${color}${font}
${voffset -8}${color1}${top_mem pid 5}${color}${goto 60}${color2}${top_mem name 3}${color}${font Liberation Sans:style=Bold:size=8}${color1}${alignr}${top_mem mem 5}${color}${font}
##############
# -  DISK  - #
##############
${voffset 10}${color2}${font Liberation Sans:style=Bold:size=14}Disk${font}${alignr}${fs_bar 8,73}${color}
${goto 13}Free: ${font Liberation Sans:style=Bold:size=8}${color2}${fs_free}${color}${font}
${voffset -15}${goto 120}${font Liberation Sans:style=Bold:size=8}Used: ${color1}${fs_used}${color}${font}
${voffset -12}${goto 10}Total: ${font Liberation Sans:style=Bold:size=8}${color2}${fs_size}${color}${font}
${goto 10}I/O-Read: ${font Liberation Sans:style=Bold:size=8}${color1}${diskio_read}${color}${font}
${voffset -8}${goto 10}I/O-Write: ${font Liberation Sans:style=Bold:size=8}${color1}${diskio_write}${color}${font}
${voffset 3}${voffset}${color4}${font wingding:style=Bold:size=10}请注意:该系统有初始化备份,请使用已安装Timeshif工具进${font}${color4}
${voffset 0}${voffset}${color4}${font wingding:style=Bold:size=10}行系统还原恢复(初始化备份日期：2023/2/27)。${font}${color4}
###############
# - NETWORK - #
###############
# |--enp3s0
${voffset 10}${color2}${font Liberation Sans:style=Bold:size=14}NETWORK${font}${color}
${if_up enp3s0}
${voffset -15}${font Liberation Sans:style=Bold:size=8}enp3s0 $stippled_hr${font}

${voffset -10}${goto 10}           ${font Liberation Sans:style=Bold:size=20}Up: ${font Liberation Sans:style=Bold:size=20}${color1}${upspeed enp3s0}${color}${font} ${alignr}${voffset 10}${color2}${upspeedgraph enp3s0 8,73 3465A4 204A87}${color}
${voffset -10}${goto 10}  ${font Liberation Sans:style=Bold:size=20}Total: ${font Liberation Sans:style=Bold:size=20}${color2}${totalup enp3s0}${color}${font}

${voffset 1}${goto 10}${font Liberation Sans:style=Bold:size=20}Down: ${font Liberation Sans:style=Bold:size=20}${color1}${downspeed enp3s0}${color}${font} ${alignr}${voffset 10}${color2}${downspeedgraph enp3s0 8,73 3465A4 204A87}${color}
${voffset -10}${goto 10}  ${font Liberation Sans:style=Bold:size=20}Total: ${font Liberation Sans:style=Bold:size=20}${color2}${totaldown enp3s0}${color}${font}

${voffset -15}${goto 10}${font wingding:style=Bold:size=15}Local IP: ${font}${alignr}${color2}${font wingding:style=Bold:size=15}${addr enp3s0}${font}${color}


